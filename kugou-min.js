!function(){function t(t){var a=[];if(0!=t.length){var e=t.split("\n");for(var n in e){e[n]=e[n].replace(/(^\s*)|(\s*$)/g,"");var r=e[n].substring(e[n].indexOf("[")+1,e[n].indexOf("]")).split(":");if(!isNaN(parseInt(r[0]))){var o=e[n].match(/\[(\d+:.+?)\]/g),i=0;for(var s in o)i+=o[s].length;var c=e[n].substring(i);for(var s in o){r=o[s].substring(1,o[s].length-1).split(":");a.push({t:(60*parseFloat(r[0])+parseFloat(r[1])).toFixed(3),c:c})}}}a.sort((function(t,a){return t.t-a.t}));var u={};return a.forEach((function(t){u[t.t]=t.c})),u}}window.kugou={search:function(t,a,e=1){var n=function(t,a){var e=document.createElement("script"),n="jsonp_"+Math.random().toString().replace(".",""),r=t+(t.indexOf("?")>=0?"&":"?")+"callback="+n;return e.src=r,window[n]=function(){delete window[n],a.apply(null,arguments)},document.body.appendChild(e),e.onload=function(){document.body.removeChild(e)},{abort:function(){try{e.remove(),e=null}catch(t){}}}}("https://mobiles.kugou.com/api/v3/search/song?format=jsonp&keyword="+encodeURI(t)+"&page="+e+"&pagesize=30&showtype=1",(function(t){var n={total:t.data.total,page:e,songs:[]};t.data.info.forEach((function(t){var a={songname:t.songname,artist:t.singername,id:t.hash,ispriviage:t.privilege>=10,album_id:t.album_id};if(t.filename.match(/【歌词 : .*】/)){var e=t.filename.match(/【歌词 : .*】/);a.title=t.filename.replace(e[0],""),a.matchLyric=e[0].replace("【歌词 : ","").replace("】","")}else a.title=t.filename;n.songs.push(a)})),a(n)}));return n},getSongDetails:function(a,e,n){var r=function(t,a,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&a(JSON.parse(n.responseText))},n.onerror=function(){e(n.status)},n.send(),{abort:function(){n.abort()}}}("https://api.gumengya.com/Api/KuGou?format=json&id="+a.toUpperCase(),(function(a){200==a.code?n({title:a.data.author+" - "+a.data.title,songname:a.data.title,artist:a.data.author,lrc:t(a.data.lrc),url:a.data.url,album:"",img:a.data.pic,lrcstr:a.data.lrc}):n({error:"获取歌曲失败",code:a.code})}));return r}}}();